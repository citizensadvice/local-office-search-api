---
openapi: 3.0.1
info:
  title: Bureau Details API (legacy)
  version: v0
paths:
  "/api/v0/location/id/{serial_number}":
    get:
      summary: Show full details for a location
      security:
      - basic_auth: []
      parameters:
      - name: serial_number
        in: path
        description: "{serial_number} is the locations serial number."
        required: true
        schema:
          type: string
      responses:
        '501':
          description: is a deprecated API which has not been reimplemented
  "/api/v0/location/list":
    get:
      summary: List members
      security:
      - basic_auth: []
      parameters:
      - name: near
        in: query
        required: false
        description: If near is provided then the nearest locations to the value are
          returned. Locations are ordered so those in the same local authority of
          are promoted.
        schema:
          type: string
      - name: bureau
        in: query
        required: false
        default: true
        description: If bureau is set to false then locations of type bureau will
          not be returned.
        schema:
          type: boolean
      - name: outlet
        in: query
        required: false
        default: false
        description: If outlet is set to true then outreaches will also be returned.
        schema:
          type: boolean
      responses:
        '501':
          description: is a deprecated API which has not been reimplemented
  "/api/v0/member/id/{id}":
    get:
      summary: Shows full details for a member
      security:
      - basic_auth: []
      parameters:
      - name: id
        in: path
        description: "{id} can be a serial number, eg 100002, or a membership number,
          eg 70/0023"
        required: true
        schema:
          type: string
      responses:
        '200':
          description: fetches all data for a member
          content:
            application/json:
              schema:
                type: object
                properties:
                  address:
                    type: object
                    properties:
                      address:
                        type: string
                      town:
                        type: string
                      county:
                        type:
                        - string
                        - 'null'
                      postcode:
                        type:
                        - string
                        - 'null'
                      onsDistrictCode:
                        type: string
                      localAuthority:
                        type: string
                      latLong:
                        type: array
                        items:
                          type: number
                        minItems: 2
                        maxItems: 2
                    required:
                    - address
                    - town
                    - county
                    - postcode
                    - latLong
                    additionalProperties: false
                  membershipNumber:
                    type: string
                  name:
                    type: string
                  serialNumber:
                    type: string
                  charityNumber:
                    type: string
                  companyNumber:
                    type: string
                  notes:
                    type:
                    - string
                    - 'null'
                  services:
                    type: object
                    properties:
                      bureaux:
                        type: array
                        items:
                          type: object
                          properties:
                            address:
                              type: object
                              properties:
                                address:
                                  type: string
                                town:
                                  type: string
                                county:
                                  type:
                                  - string
                                  - 'null'
                                postcode:
                                  type:
                                  - string
                                  - 'null'
                                onsDistrictCode:
                                  type: string
                                localAuthority:
                                  type: string
                                latLong:
                                  type: array
                                  items:
                                    type: number
                                  minItems: 2
                                  maxItems: 2
                              required:
                              - address
                              - town
                              - county
                              - postcode
                              - latLong
                              additionalProperties: false
                            membershipNumber:
                              type: string
                            name:
                              type: string
                            serialNumber:
                              type: string
                            inVCC:
                              type: boolean
                            isBureau:
                              type: boolean
                            isOutlet:
                              type: boolean
                            features:
                              type: array
                              items:
                                type: string
                            notes:
                              type:
                              - string
                              - 'null'
                            openingTimes:
                              type: array
                              items:
                                type: object
                                properties:
                                  day:
                                    type: string
                                    enum:
                                    - Monday
                                    - Tuesday
                                    - Wednesday
                                    - Thursday
                                    - Friday
                                    - Saturday
                                    - Sunday
                                  start1:
                                    type:
                                    - string
                                    - 'null'
                                  end1:
                                    type:
                                    - string
                                    - 'null'
                                  start2:
                                    type:
                                    - string
                                    - 'null'
                                  end2:
                                    type:
                                    - string
                                    - 'null'
                                  notes:
                                    type:
                                    - string
                                    - 'null'
                                required:
                                - day
                                - start1
                                - end1
                                - start2
                                - end2
                                - notes
                                additionalProperties: false
                            publicContacts:
                              type: object
                              properties:
                                email:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                fax:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                minicom:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                telephone:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                website:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                              required:
                              - email
                              - fax
                              - minicom
                              - telephone
                              - website
                              additionalProperties: false
                            telephoneTimes:
                              type: array
                              items:
                                type: object
                                properties:
                                  day:
                                    type: string
                                    enum:
                                    - Monday
                                    - Tuesday
                                    - Wednesday
                                    - Thursday
                                    - Friday
                                    - Saturday
                                    - Sunday
                                  start1:
                                    type:
                                    - string
                                    - 'null'
                                  end1:
                                    type:
                                    - string
                                    - 'null'
                                  start2:
                                    type:
                                    - string
                                    - 'null'
                                  end2:
                                    type:
                                    - string
                                    - 'null'
                                  notes:
                                    type:
                                    - string
                                    - 'null'
                                required:
                                - day
                                - start1
                                - end1
                                - start2
                                - end2
                                - notes
                                additionalProperties: false
                          required:
                          - address
                          - membershipNumber
                          - name
                          - serialNumber
                          - inVCC
                          - isBureau
                          - isOutlet
                          - features
                          - notes
                          - openingTimes
                          - publicContacts
                          - telephoneTimes
                          additionalProperties: false
                      outlets:
                        type: array
                        items:
                          type: object
                          properties:
                            address:
                              type: object
                              properties:
                                address:
                                  type: string
                                town:
                                  type: string
                                county:
                                  type:
                                  - string
                                  - 'null'
                                postcode:
                                  type:
                                  - string
                                  - 'null'
                                onsDistrictCode:
                                  type: string
                                localAuthority:
                                  type: string
                                latLong:
                                  type: array
                                  items:
                                    type: number
                                  minItems: 2
                                  maxItems: 2
                              required:
                              - address
                              - town
                              - county
                              - postcode
                              - latLong
                              additionalProperties: false
                            membershipNumber:
                              type: string
                            name:
                              type: string
                            serialNumber:
                              type: string
                            inVCC:
                              type: boolean
                            isBureau:
                              type: boolean
                            isOutlet:
                              type: boolean
                            features:
                              type: array
                              items:
                                type: string
                            notes:
                              type:
                              - string
                              - 'null'
                            openingTimes:
                              type: array
                              items:
                                type: object
                                properties:
                                  day:
                                    type: string
                                    enum:
                                    - Monday
                                    - Tuesday
                                    - Wednesday
                                    - Thursday
                                    - Friday
                                    - Saturday
                                    - Sunday
                                  start1:
                                    type:
                                    - string
                                    - 'null'
                                  end1:
                                    type:
                                    - string
                                    - 'null'
                                  start2:
                                    type:
                                    - string
                                    - 'null'
                                  end2:
                                    type:
                                    - string
                                    - 'null'
                                  notes:
                                    type:
                                    - string
                                    - 'null'
                                required:
                                - day
                                - start1
                                - end1
                                - start2
                                - end2
                                - notes
                                additionalProperties: false
                            publicContacts:
                              type: object
                              properties:
                                email:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                fax:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                minicom:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                telephone:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                                website:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      contact:
                                        type: string
                                      description:
                                        type:
                                        - string
                                        - 'null'
                                    required:
                                    - contact
                                    - description
                                    additionalProperties: false
                              required:
                              - email
                              - fax
                              - minicom
                              - telephone
                              - website
                              additionalProperties: false
                            telephoneTimes:
                              type: array
                              items:
                                type: object
                                properties:
                                  day:
                                    type: string
                                    enum:
                                    - Monday
                                    - Tuesday
                                    - Wednesday
                                    - Thursday
                                    - Friday
                                    - Saturday
                                    - Sunday
                                  start1:
                                    type:
                                    - string
                                    - 'null'
                                  end1:
                                    type:
                                    - string
                                    - 'null'
                                  start2:
                                    type:
                                    - string
                                    - 'null'
                                  end2:
                                    type:
                                    - string
                                    - 'null'
                                  notes:
                                    type:
                                    - string
                                    - 'null'
                                required:
                                - day
                                - start1
                                - end1
                                - start2
                                - end2
                                - notes
                                additionalProperties: false
                          required:
                          - address
                          - membershipNumber
                          - name
                          - serialNumber
                          - inVCC
                          - isBureau
                          - isOutlet
                          - features
                          - notes
                          - openingTimes
                          - publicContacts
                          - telephoneTimes
                          additionalProperties: false
                    required:
                    - bureaux
                    - outlets
                    additionalProperties: false
                  staff:
                    type: 'null'
                  vacancies:
                    type: array
                    items:
                      type: object
                      properties:
                        address:
                          type: object
                          properties:
                            address:
                              type: string
                            town:
                              type: string
                            county:
                              type:
                              - string
                              - 'null'
                            postcode:
                              type:
                              - string
                              - 'null'
                            onsDistrictCode:
                              type: string
                            localAuthority:
                              type: string
                            latLong:
                              type: array
                              items:
                                type: number
                              minItems: 2
                              maxItems: 2
                          required:
                          - address
                          - town
                          - county
                          - postcode
                          - latLong
                          additionalProperties: false
                        membershipNumber:
                          type: string
                        name:
                          type: string
                        serialNumber:
                          type: string
                        email:
                          type: string
                        id:
                          type: string
                        roles:
                          type: array
                          items:
                            type: string
                        telephone:
                          type:
                          - string
                          - 'null'
                        website:
                          type:
                          - string
                          - 'null'
                      required:
                      - address
                      - membershipNumber
                      - name
                      - serialNumber
                      - email
                      - id
                      - roles
                      - telephone
                      - website
                      additionalProperties: false
                  website:
                    type:
                    - string
                    - 'null'
                required:
                - address
                - membershipNumber
                - name
                - serialNumber
                - charityNumber
                - notes
                - services
                - staff
                - vacancies
                - website
                additionalProperties: false
        '404':
          description: when no member with that ID is found
  "/api/v0/member/list":
    get:
      summary: List members
      security:
      - basic_auth: []
      parameters:
      - name: near
        in: query
        required: false
        description: Without near all members will be show in alphabetical order.
          If near is provided then the nearest members to the parameter will be returned.
        schema:
          type: string
      responses:
        '501':
          description: is a deprecated API which has not been reimplemented
  "/api/v0/vacancy/id/{id}":
    get:
      summary: Shows full details for a member
      security:
      - basic_auth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: fetches a single vacancy
          content:
            application/json:
              schema:
                type: object
                properties:
                  address:
                    type: object
                    properties:
                      address:
                        type: string
                      town:
                        type: string
                      county:
                        type:
                        - string
                        - 'null'
                      postcode:
                        type:
                        - string
                        - 'null'
                      onsDistrictCode:
                        type: string
                      localAuthority:
                        type: string
                      latLong:
                        type: array
                        items:
                          type: number
                        minItems: 2
                        maxItems: 2
                    required:
                    - address
                    - town
                    - county
                    - postcode
                    - latLong
                    additionalProperties: false
                  membershipNumber:
                    type: string
                  name:
                    type: string
                  serialNumber:
                    type: string
                  email:
                    type: string
                  id:
                    type: string
                  roles:
                    type: array
                    items:
                      type: string
                  telephone:
                    type:
                    - string
                    - 'null'
                  website:
                    type:
                    - string
                    - 'null'
                required:
                - address
                - membershipNumber
                - name
                - serialNumber
                - email
                - id
                - roles
                - telephone
                - website
                additionalProperties: false
  "/api/v0/vacancy/list":
    get:
      summary: List members
      security:
      - basic_auth: []
      parameters:
      - name: near
        in: query
        required: false
        description: If near is provided then the nearest vacancies to the specified
          location are returned.
        schema:
          type: string
      - name: roles
        in: query
        required: false
        description: If roles is provided then the role types are filtered to match
          the list of roles (comma separated) provided. e.g roles=trustee,receptionist
          finds all trustee or receptionist vacancies.
        schema:
          type: string
      responses:
        '200':
          description: returns the nearest vacancies to the specified location
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    enum:
                    - vacancies
                  list:
                    type: array
                    items:
                      type: object
                      properties:
                        distance:
                          type: number
                        address:
                          type: object
                          properties:
                            address:
                              type: string
                            town:
                              type: string
                            county:
                              type:
                              - string
                              - 'null'
                            postcode:
                              type:
                              - string
                              - 'null'
                            onsDistrictCode:
                              type: string
                            localAuthority:
                              type: string
                            latLong:
                              type: array
                              items:
                                type: number
                              minItems: 2
                              maxItems: 2
                          required:
                          - address
                          - town
                          - county
                          - postcode
                          - latLong
                          additionalProperties: false
                        membershipNumber:
                          type: string
                        name:
                          type: string
                        serialNumber:
                          type: string
                        email:
                          type: string
                        id:
                          type: string
                        roles:
                          type: array
                          items:
                            type: string
                        telephone:
                          type:
                          - string
                          - 'null'
                        website:
                          type:
                          - string
                          - 'null'
                      required:
                      - address
                      - membershipNumber
                      - name
                      - serialNumber
                      - email
                      - id
                      - roles
                      - telephone
                      - website
                      - distance
                      additionalProperties: false
                required:
                - type
                - list
                additionalProperties: false
servers:
- url: https://{defaultHost}
  variables:
    defaultHost:
      default: www.example.com
components:
  securitySchemes:
    basic_auth:
      type: http
      scheme: basic
